var Ge=Object.defineProperty;var Xe=(t,e,n)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>(Xe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function V(){}function Ye(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ze(t){return t()}function Be(){return Object.create(null)}function D(t){t.forEach(Ze)}function Ee(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let be;function Ve(t,e){return t===e?!0:(be||(be=document.createElement("a")),be.href=e,t===be.href)}function xe(t){return Object.keys(t).length===0}function et(t,...e){if(t==null){for(const l of e)l(void 0);return V}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function U(t,e,n){t.$$.on_destroy.push(et(e,n))}function A(t,e,n){return t.set(n),e}function f(t,e){t.appendChild(e)}function N(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function tt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function w(){return H(" ")}function Ke(){return H("")}function L(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Ne(t){return function(e){return e.preventDefault(),t.call(this,e)}}function qe(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return Array.from(t.childNodes)}function de(t,e){e=""+e,t.data!==e&&(t.data=e)}function j(t,e){t.value=e??""}function Le(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function lt(t){const e=t.querySelector(":checked");return e&&e.__value}let me;function x(t){me=t}function We(){if(!me)throw new Error("Function called outside component initialization");return me}function st(t){We().$$.on_mount.push(t)}const pe=[],oe=[];let he=[];const Ie=[],rt=Promise.resolve();let Pe=!1;function ot(){Pe||(Pe=!0,rt.then(je))}function ke(t){he.push(t)}function Te(t){Ie.push(t)}const Oe=new Set;let ae=0;function je(){if(ae!==0)return;const t=me;do{try{for(;ae<pe.length;){const e=pe[ae];ae++,x(e),it(e.$$)}}catch(e){throw pe.length=0,ae=0,e}for(x(null),pe.length=0,ae=0;oe.length;)oe.pop()();for(let e=0;e<he.length;e+=1){const n=he[e];Oe.has(n)||(Oe.add(n),n())}he.length=0}while(pe.length);for(;Ie.length;)Ie.pop()();Pe=!1,Oe.clear(),x(t)}function it(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ke)}}function ut(t){const e=[],n=[];he.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),he=e}const ye=new Set;let ue;function se(){ue={r:0,c:[],p:ue}}function re(){ue.r||D(ue.c),ue=ue.p}function P(t,e){t&&t.i&&(ye.delete(t),t.i(e))}function B(t,e,n,l){if(t&&t.o){if(ye.has(t))return;ye.add(t),ue.c.push(()=>{ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ct(t,e){const n=e.token={};function l(s,r,i,o){if(e.token!==n)return;e.resolved=o;let u=e.ctx;i!==void 0&&(u=u.slice(),u[i]=o);const a=s&&(e.current=s)(u);let d=!1;e.block&&(e.blocks?e.blocks.forEach((p,v)=>{v!==r&&p&&(se(),B(p,1,1,()=>{e.blocks[v]===p&&(e.blocks[v]=null)}),re())}):e.block.d(1),a.c(),P(a,1),a.m(e.mount(),e.anchor),d=!0),e.block=a,e.blocks&&(e.blocks[r]=a),d&&je()}if(Ye(t)){const s=We();if(t.then(r=>{x(s),l(e.then,1,e.value,r),x(null)},r=>{if(x(s),l(e.catch,2,e.error,r),x(null),!e.hasCatch)throw r}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function at(t,e,n){const l=e.slice(),{resolved:s}=t;t.current===t.then&&(l[t.value]=s),t.current===t.catch&&(l[t.error]=s),t.block.p(l,n)}function Ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ft(t,e){B(t,1,1,()=>{e.delete(t.key)})}function pt(t,e,n,l,s,r,i,o,u,a,d,p){let v=t.length,g=r.length,y=v;const h={};for(;y--;)h[t[y].key]=y;const _=[],b=new Map,k=new Map,q=[];for(y=g;y--;){const C=p(s,r,y),S=n(C);let T=i.get(S);T?l&&q.push(()=>T.p(C,e)):(T=a(S,C),T.c()),b.set(S,_[y]=T),S in h&&k.set(S,Math.abs(y-h[S]))}const $=new Set,O=new Set;function I(C){P(C,1),C.m(o,d),i.set(C.key,C),d=C.first,g--}for(;v&&g;){const C=_[g-1],S=t[v-1],T=C.key,F=S.key;C===S?(d=C.first,v--,g--):b.has(F)?!i.has(T)||$.has(T)?I(C):O.has(F)?v--:k.get(T)>k.get(F)?(O.add(T),I(C)):($.add(F),v--):(u(S,i),v--)}for(;v--;){const C=t[v];b.has(C.key)||u(C,i)}for(;g;)I(_[g-1]);return D(q),_}function $e(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function ne(t){t&&t.c()}function G(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),ke(()=>{const r=t.$$.on_mount.map(Ze).filter(Ee);t.$$.on_destroy?t.$$.on_destroy.push(...r):D(r),t.$$.on_mount=[]}),s.forEach(ke)}function X(t,e){const n=t.$$;n.fragment!==null&&(ut(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){t.$$.dirty[0]===-1&&(pe.push(t),ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(t,e,n,l,s,r,i=null,o=[-1]){const u=me;x(t);const a=t.$$={fragment:null,ctx:[],props:r,update:V,not_equal:s,bound:Be(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Be(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};i&&i(a.root);let d=!1;if(a.ctx=n?n(t,e.props||{},(p,v,...g)=>{const y=g.length?g[0]:v;return a.ctx&&s(a.ctx[p],a.ctx[p]=y)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](y),d&&dt(t,p)),v}):[],a.update(),d=!0,D(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const p=nt(e.target);a.fragment&&a.fragment.l(p),p.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&P(t.$$.fragment),G(t,e.target,e.anchor),je()}x(u)}class W{constructor(){Se(this,"$$");Se(this,"$$set")}$destroy(){X(this,1),this.$destroy=V}$on(e,n){if(!Ee(n))return V;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ht="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ht);const fe=[];function ge(t,e=V){let n;const l=new Set;function s(o){if(Q(t,o)&&(t=o,n)){const u=!fe.length;for(const a of l)a[1](),fe.push(a,t);if(u){for(let a=0;a<fe.length;a+=2)fe[a][0](fe[a+1]);fe.length=0}}}function r(o){s(o(t))}function i(o,u=V){const a=[o,u];return l.add(a),l.size===1&&(n=e(s,r)||V),o(t),()=>{l.delete(a),l.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:i}}const z=ge([]),_e=ge("https://tienda-obli.sebasdiaz.com"),ee=ge(!1),we=ge([]);let te=ge("");function mt(t){let e,n,l,s;return{c(){e=m("div"),n=m("p"),l=H(t[0]),c(n,"class","svelte-qjea0c"),c(e,"style",s=`border-color: ${t[1]=="success"?"green":"red"};`),c(e,"class","svelte-qjea0c")},m(r,i){N(r,e,i),f(e,n),f(n,l),t[4](e)},p(r,[i]){i&1&&de(l,r[0]),i&2&&s!==(s=`border-color: ${r[1]=="success"?"green":"red"};`)&&c(e,"style",s)},i:V,o:V,d(r){r&&E(e),t[4](null)}}}function gt(t,e,n){let{message:l}=e,{duration:s}=e,{type:r="success"}=e,i;st(()=>{n(2,i.style.opacity=1,i)}),setTimeout(()=>{n(2,i.style.opacity=0,i),setTimeout(()=>{i.parentNode.removeChild(i)},150)},s);function o(u){oe[u?"unshift":"push"](()=>{i=u,n(2,i)})}return t.$$set=u=>{"message"in u&&n(0,l=u.message),"duration"in u&&n(3,s=u.duration),"type"in u&&n(1,r=u.type)},[l,r,i,s,o]}class Z extends W{constructor(e){super(),K(this,e,gt,mt,Q,{message:0,duration:3,type:1})}}function _t(t){let e,n,l,s,r,i,o,u,a,d,p,v,g,y,h;return{c(){e=m("div"),n=m("h1"),n.textContent="Login",l=w(),s=m("form"),r=m("label"),r.textContent="Username:",i=w(),o=m("input"),u=w(),a=m("label"),a.textContent="Password:",d=w(),p=m("input"),v=w(),g=m("input"),c(n,"class","svelte-p5vqlt"),c(r,"for","loginUsername"),c(o,"type","text"),c(o,"name","loginUsername"),c(o,"id","loginUsername"),c(o,"minlength","2"),o.required=!0,c(o,"class","svelte-p5vqlt"),c(a,"for","loginPassword"),c(p,"type","password"),c(p,"name","loginPassword"),c(p,"id","loginPassword"),c(p,"minlength","8"),p.required=!0,c(p,"class","svelte-p5vqlt"),c(g,"type","submit"),g.value="Log In",c(g,"class","svelte-p5vqlt"),c(s,"id","login"),c(s,"action","POST"),c(e,"class","login svelte-p5vqlt")},m(_,b){N(_,e,b),f(e,n),f(e,l),f(e,s),f(s,r),f(s,i),f(s,o),j(o,t[0]),f(s,u),f(s,a),f(s,d),f(s,p),j(p,t[1]),f(s,v),f(s,g),t[6](s),y||(h=[L(o,"input",t[4]),L(p,"input",t[5]),L(s,"submit",qe(Ne(t[3])))],y=!0)},p(_,[b]){b&1&&o.value!==_[0]&&j(o,_[0]),b&2&&p.value!==_[1]&&j(p,_[1])},i:V,o:V,d(_){_&&E(e),t[6](null),y=!1,D(h)}}}function vt(t,e,n){let l,s,r;U(t,ee,g=>n(7,l=g)),U(t,te,g=>n(8,s=g)),U(t,_e,g=>n(9,r=g));let i="",o="",u;const a=async()=>{if(!u.checkValidity()||i.length<2&&o.length<8){alert("Invalid data");return}try{const y=await(await fetch(`${r}/login`,{method:"POST",body:JSON.stringify({username:i,password:o}),headers:{"Content-Type":"application/json"}})).json();if(y.ok)A(te,s=i,s),A(ee,l=!0,l),console.log(y),localStorage.setItem("user",JSON.stringify({username:i,password:o})),new Z({target:document.getElementById("popups"),props:{message:"Logged in as "+i,duration:2e3,type:"success"}});else throw new Error(y.error)}catch(g){console.log(g),new Z({target:document.getElementById("popups"),props:{message:"Failed to login "+g,duration:2e3,type:"failed"}})}};function d(){i=this.value,n(0,i)}function p(){o=this.value,n(1,o)}function v(g){oe[g?"unshift":"push"](()=>{u=g,n(2,u)})}return[i,o,u,a,d,p,v]}class bt extends W{constructor(e){super(),K(this,e,vt,_t,Q,{})}}function yt(t){let e,n,l,s,r,i,o,u,a,d,p,v,g,y,h;return{c(){e=m("div"),n=m("h1"),n.textContent="Register",l=w(),s=m("form"),r=m("label"),r.textContent="Username:",i=w(),o=m("input"),u=w(),a=m("label"),a.textContent="Password:",d=w(),p=m("input"),v=w(),g=m("input"),c(n,"class","svelte-1mbg8b3"),c(r,"for","username"),c(o,"type","text"),c(o,"name","username"),c(o,"id","username"),c(o,"minlength","2"),o.required=!0,c(o,"class","svelte-1mbg8b3"),c(a,"for","password"),c(p,"type","password"),c(p,"name","password"),c(p,"id","password"),c(p,"minlength","8"),p.required=!0,c(p,"class","svelte-1mbg8b3"),c(g,"type","submit"),g.value="Register",c(g,"class","svelte-1mbg8b3"),c(s,"id","register"),c(s,"action","POST"),c(e,"class","register svelte-1mbg8b3")},m(_,b){N(_,e,b),f(e,n),f(e,l),f(e,s),f(s,r),f(s,i),f(s,o),j(o,t[0]),f(s,u),f(s,a),f(s,d),f(s,p),j(p,t[1]),f(s,v),f(s,g),t[6](s),y||(h=[L(o,"input",t[4]),L(p,"input",t[5]),L(s,"submit",qe(Ne(t[3])))],y=!0)},p(_,[b]){b&1&&o.value!==_[0]&&j(o,_[0]),b&2&&p.value!==_[1]&&j(p,_[1])},i:V,o:V,d(_){_&&E(e),t[6](null),y=!1,D(h)}}}function wt(t,e,n){let l,s,r;U(t,ee,g=>n(7,l=g)),U(t,te,g=>n(8,s=g)),U(t,_e,g=>n(9,r=g));let i="",o="",u;const a=async()=>{if(!u.checkValidity()||i.length<2||o.length<8){alert("Invalid data");return}try{const y=await(await fetch(`${r}/register`,{method:"POST",body:JSON.stringify({username:i,password:o}),headers:{"Content-Type":"application/json"}})).json();if(y.ok)A(te,s=i,s),A(ee,l=!0,l),console.log(y),localStorage.setItem("user",JSON.stringify({username:i,password:o})),new Z({target:document.getElementById("popups"),props:{message:"Registered as "+i,duration:2e3,type:"success"}});else throw new Error(y.error)}catch(g){console.log(g),new Z({target:document.getElementById("popups"),props:{message:"Failed to register "+g,duration:2e3,type:"failed"}})}};function d(){i=this.value,n(0,i)}function p(){o=this.value,n(1,o)}function v(g){oe[g?"unshift":"push"](()=>{u=g,n(2,u)})}return[i,o,u,a,d,p,v]}class kt extends W{constructor(e){super(),K(this,e,wt,yt,Q,{})}}function Ae(t){let e,n;return e=new bt({}),{c(){ne(e.$$.fragment)},m(l,s){G(e,l,s),n=!0},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Ue(t){let e,n;return e=new kt({}),{c(){ne(e.$$.fragment)},m(l,s){G(e,l,s),n=!0},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Ct(t){let e,n,l,s=t[0]==="login"&&Ae(),r=t[0]==="register"&&Ue();return{c(){e=m("section"),s&&s.c(),n=w(),r&&r.c()},m(i,o){N(i,e,o),s&&s.m(e,null),f(e,n),r&&r.m(e,null),l=!0},p(i,[o]){i[0]==="login"?s?o&1&&P(s,1):(s=Ae(),s.c(),P(s,1),s.m(e,n)):s&&(se(),B(s,1,1,()=>{s=null}),re()),i[0]==="register"?r?o&1&&P(r,1):(r=Ue(),r.c(),P(r,1),r.m(e,null)):r&&(se(),B(r,1,1,()=>{r=null}),re())},i(i){l||(P(s),P(r),l=!0)},o(i){B(s),B(r),l=!1},d(i){i&&E(e),s&&s.d(),r&&r.d()}}}function St(t,e,n){let{selectValue:l}=e;return t.$$set=s=>{"selectValue"in s&&n(0,l=s.selectValue)},[l]}class Ot extends W{constructor(e){super(),K(this,e,St,Ct,Q,{selectValue:0})}}function Vt(t){let e,n,l,s,r;return{c(){e=m("a"),e.textContent="Login",n=w(),l=m("a"),l.textContent="Register",c(e,"href","./#login"),c(e,"class","svelte-162631l"),c(l,"href","./#register"),c(l,"class","svelte-162631l")},m(i,o){N(i,e,o),N(i,n,o),N(i,l,o),s||(r=[L(e,"click",t[7]),L(l,"click",t[8])],s=!0)},p:V,d(i){i&&(E(e),E(n),E(l)),s=!1,D(r)}}}function It(t){let e,n,l,s,r,i,o;return{c(){e=m("a"),n=H(t[3]),l=H("'s cart"),s=w(),r=m("a"),r.textContent="Log Out",c(e,"href","./#cart"),c(e,"class","svelte-162631l"),c(r,"href","./#login"),c(r,"class","svelte-162631l")},m(u,a){N(u,e,a),f(e,n),f(e,l),N(u,s,a),N(u,r,a),i||(o=[L(e,"click",t[4]),L(r,"click",function(){Ee(t[1])&&t[1].apply(this,arguments)})],i=!0)},p(u,a){t=u,a&8&&de(n,t[3])},d(u){u&&(E(e),E(s),E(r)),i=!1,D(o)}}}function Pt(t){let e,n,l,s,r;function i(a,d){return a[2]?It:Vt}let o=i(t),u=o(t);return{c(){e=m("nav"),n=m("a"),n.textContent="Shop",l=w(),u.c(),c(n,"href","./#shop"),c(n,"class","svelte-162631l"),c(e,"class","svelte-162631l")},m(a,d){N(a,e,d),f(e,n),f(e,l),u.m(e,null),s||(r=L(n,"click",t[5]),s=!0)},p(a,[d]){o===(o=i(a))&&u?u.p(a,d):(u.d(1),u=o(a),u&&(u.c(),u.m(e,null)))},i:V,o:V,d(a){a&&E(e),u.d(),s=!1,r()}}}function Et(t,e,n){let l,s;U(t,ee,v=>n(2,l=v)),U(t,te,v=>n(3,s=v));let{cartViewable:r=!1}=e,{logout:i}=e,{selectValue:o}=e;const u=()=>{l?n(6,r=!r):alert("Please log in before checking your cart")},a=()=>{l||new Z({target:document.getElementById("popups"),props:{message:"Please log in to access the shop",duration:2e3,type:"failed"}}),n(6,r=!1)},d=()=>{n(0,o="login")},p=()=>{n(0,o="register")};return t.$$set=v=>{"cartViewable"in v&&n(6,r=v.cartViewable),"logout"in v&&n(1,i=v.logout),"selectValue"in v&&n(0,o=v.selectValue)},[o,i,l,s,u,a,r,d,p]}class Nt extends W{constructor(e){super(),K(this,e,Et,Pt,Q,{cartViewable:6,logout:1,selectValue:0})}}function qt(t){let e,n,l,s,r,i,o,u,a,d,p,v,g;return{c(){e=m("div"),n=m("img"),s=w(),r=m("div"),i=m("div"),o=m("span"),o.textContent=`${t[0]}`,u=w(),a=m("span"),a.textContent=`$${t[2]}`,d=w(),p=m("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512" class="svelte-15dfui3"><path d="M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"></path></svg>',c(n,"width","96px"),c(n,"height","96px"),Ve(n.src,l=t[1])||c(n,"src",l),c(n,"alt",t[0]+" image"),c(n,"class","svelte-15dfui3"),c(o,"class","name"),c(a,"class","price svelte-15dfui3"),c(i,"class","data svelte-15dfui3"),c(p,"class","svelte-15dfui3"),c(r,"class","svelte-15dfui3"),c(e,"class","product svelte-15dfui3")},m(y,h){N(y,e,h),f(e,n),f(e,s),f(e,r),f(r,i),f(i,o),f(i,u),f(i,a),f(r,d),f(r,p),v||(g=L(p,"click",t[3]),v=!0)},p:V,i:V,o:V,d(y){y&&E(e),v=!1,g()}}}function jt(t,e,n){let l;U(t,z,d=>n(5,l=d));let{chofer:s}=e;const{name:r,image:i,price:o,id:u}=s,a=()=>{l.some(d=>d.name===r)?A(z,l=l.map(d=>(d.id===u&&(d.quantity+=1),d)),l):A(z,l=[...l,{name:r,image:i,price:o,quantity:1,id:u}],l),z.set(l),new Z({target:document.getElementById("popups"),props:{message:`${r} trip added to cart`,duration:2e3,type:"success"}}),localStorage.setItem("cart",JSON.stringify(l))};return t.$$set=d=>{"chofer"in d&&n(4,s=d.chofer)},[r,i,o,a,s]}class Bt extends W{constructor(e){super(),K(this,e,jt,qt,Q,{chofer:4})}}const Lt=(t,e)=>{const n=t.name.toUpperCase(),l=e.name.toUpperCase();let s=n>l?1:-1;return n===l&&(s=t.price>e.price?1:-1),s},Tt=(t,e)=>{const n=t.name.toUpperCase(),l=e.name.toUpperCase();let s=n<l?1:-1;return n===l&&(s=t.price>e.price?1:-1),s},$t=(t,e)=>{const n=t.price,l=e.price;let s=n>l?1:-1;return n===l&&(s=t.name.toUpperCase()>e.name.toUpperCase()?1:-1),s},At=(t,e)=>{const n=t.price,l=e.price;let s=n<l?1:-1;return n===l&&(s=t.name.toUpperCase()>e.name.toUpperCase()?1:-1),s};function Ut(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner svelte-11vwt31"></div>',c(e,"class","spinnerContainer svelte-11vwt31")},m(n,l){N(n,e,l)},p:V,i:V,o:V,d(n){n&&E(e)}}}class Jt extends W{constructor(e){super(),K(this,e,null,Ut,Q,{})}}function Je(t,e,n){const l=t.slice();return l[5]=e[n],l}function Me(t){let e,n;return e=new Jt({}),{c(){ne(e.$$.fragment)},m(l,s){G(e,l,s),n=!0},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Mt(t){return{c:V,m:V,p:V,i:V,o:V,d:V}}function zt(t){let e=[],n=new Map,l,s,r=Ce(t[1]);const i=o=>o[5];for(let o=0;o<r.length;o+=1){let u=Je(t,r,o),a=i(u);n.set(a,e[o]=ze(a,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=Ke()},m(o,u){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,u);N(o,l,u),s=!0},p(o,u){u&2&&(r=Ce(o[1]),se(),e=pt(e,u,i,1,o,r,n,l.parentNode,ft,ze,l,Je),re())},i(o){if(!s){for(let u=0;u<r.length;u+=1)P(e[u]);s=!0}},o(o){for(let u=0;u<e.length;u+=1)B(e[u]);s=!1},d(o){o&&E(l);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function ze(t,e){let n,l,s;return l=new Bt({props:{chofer:e[5]}}),{key:t,first:null,c(){n=Ke(),ne(l.$$.fragment),this.first=n},m(r,i){N(r,n,i),G(l,r,i),s=!0},p(r,i){e=r;const o={};i&2&&(o.chofer=e[5]),l.$set(o)},i(r){s||(P(l.$$.fragment,r),s=!0)},o(r){B(l.$$.fragment,r),s=!1},d(r){r&&E(n),X(l,r)}}}function Ft(t){return{c:V,m:V,p:V,i:V,o:V,d:V}}function Dt(t){let e,n,l,s,r,i,o,u,a,d,p,v,g,y,h=t[1].length===0&&Me(),_={ctx:t,current:null,token:null,hasCatch:!1,pending:Ft,then:zt,catch:Mt,blocks:[,,,]};return ct(we,_),{c(){e=m("label"),e.textContent="Sort By:",n=w(),l=m("select"),s=m("option"),s.textContent="-",r=m("option"),r.textContent="A-Z",i=m("option"),i.textContent="Z-A",o=m("option"),o.textContent="Price (low to high)",u=m("option"),u.textContent="Price (high to low)",a=w(),d=m("div"),h&&h.c(),p=w(),_.block.c(),c(e,"for","sort"),s.selected=!0,s.disabled=!0,s.__value="",j(s,s.__value),r.__value="name",j(r,r.__value),i.__value="nameDesc",j(i,i.__value),o.__value="price",j(o,o.__value),u.__value="priceDesc",j(u,u.__value),c(l,"name","sort"),c(l,"id","sort"),c(l,"class","svelte-1gswet7"),t[0]===void 0&&ke(()=>t[3].call(l)),c(d,"class","productos svelte-1gswet7")},m(b,k){N(b,e,k),N(b,n,k),N(b,l,k),f(l,s),f(l,r),f(l,i),f(l,o),f(l,u),Le(l,t[0],!0),N(b,a,k),N(b,d,k),h&&h.m(d,null),f(d,p),_.block.m(d,_.anchor=null),_.mount=()=>d,_.anchor=null,v=!0,g||(y=[L(l,"change",t[3]),L(l,"change",t[2])],g=!0)},p(b,[k]){t=b,k&1&&Le(l,t[0]),t[1].length===0?h?k&2&&P(h,1):(h=Me(),h.c(),P(h,1),h.m(d,p)):h&&(se(),B(h,1,1,()=>{h=null}),re()),at(_,t,k)},i(b){v||(P(h),P(_.block),v=!0)},o(b){B(h);for(let k=0;k<3;k+=1){const q=_.blocks[k];B(q)}v=!1},d(b){b&&(E(e),E(n),E(l),E(a),E(d)),h&&h.d(),_.block.d(),_.token=null,_=null,g=!1,D(y)}}}function Rt(t,e,n){let l,s;U(t,we,u=>n(1,l=u)),U(t,_e,u=>n(4,s=u));let r;const i=()=>{r==="name"?l.sort(Lt):r==="nameDesc"?l.sort(Tt):r==="price"?l.sort($t):r==="priceDesc"&&l.sort(At),we.set(l)};l.length===0&&fetch(`${s}/choferes`).then(u=>u.json()).then(u=>{A(we,l=u,l)}).catch(u=>{console.log(u),new Z({target:document.getElementById("popups"),props:{message:"Failed to fetch choferes "+u,duration:2e3,type:"failed"}})});function o(){r=lt(this),n(0,r)}return[r,l,i,o]}class Ht extends W{constructor(e){super(),K(this,e,Rt,Dt,Q,{})}}function Qt(t){let e,n,l,s,r,i,o,u,a,d,p,v,g,y,h,_,b,k,q,$,O,I,C,S,T,F,R,ie,le,ce,ve;return{c(){e=m("div"),n=m("h2"),n.textContent="Checkout",l=w(),s=m("form"),r=m("label"),r.textContent="Name",i=w(),o=m("input"),u=w(),a=m("label"),a.textContent="Email",d=w(),p=m("input"),v=w(),g=m("label"),g.textContent="Address",y=w(),h=m("input"),_=w(),b=m("label"),b.textContent="City",k=w(),q=m("input"),$=w(),O=m("label"),O.textContent="State",I=w(),C=m("input"),S=w(),T=m("label"),T.textContent="Zip",F=w(),R=m("input"),ie=w(),le=m("button"),le.textContent="Submit",c(r,"for","name"),c(r,"class","svelte-15x9j87"),c(o,"type","text"),c(o,"id","name"),c(o,"minlength","2"),c(a,"for","email"),c(a,"class","svelte-15x9j87"),c(p,"type","email"),c(p,"id","email"),c(g,"for","address"),c(g,"class","svelte-15x9j87"),c(h,"type","text"),c(h,"id","address"),c(h,"minlength","2"),c(b,"for","city"),c(b,"class","svelte-15x9j87"),c(q,"type","text"),c(q,"id","city"),c(q,"minlength","2"),c(O,"for","state"),c(O,"class","svelte-15x9j87"),c(C,"type","text"),c(C,"id","state"),c(C,"minlength","2"),c(T,"for","zip"),c(T,"class","svelte-15x9j87"),c(R,"type","text"),c(R,"id","zip"),c(le,"type","submit"),c(s,"method","post"),c(s,"class","svelte-15x9j87"),c(e,"class","formCheckout svelte-15x9j87")},m(J,M){N(J,e,M),f(e,n),f(e,l),f(e,s),f(s,r),f(s,i),f(s,o),j(o,t[0]),f(s,u),f(s,a),f(s,d),f(s,p),j(p,t[1]),f(s,v),f(s,g),f(s,y),f(s,h),j(h,t[2]),f(s,_),f(s,b),f(s,k),f(s,q),j(q,t[3]),f(s,$),f(s,O),f(s,I),f(s,C),j(C,t[4]),f(s,S),f(s,T),f(s,F),f(s,R),j(R,t[5]),f(s,ie),f(s,le),t[14](s),ce||(ve=[L(o,"input",t[8]),L(p,"input",t[9]),L(h,"input",t[10]),L(q,"input",t[11]),L(C,"input",t[12]),L(R,"input",t[13]),L(s,"submit",qe(Ne(t[7])))],ce=!0)},p(J,[M]){M&1&&o.value!==J[0]&&j(o,J[0]),M&2&&p.value!==J[1]&&j(p,J[1]),M&4&&h.value!==J[2]&&j(h,J[2]),M&8&&q.value!==J[3]&&j(q,J[3]),M&16&&C.value!==J[4]&&j(C,J[4]),M&32&&R.value!==J[5]&&j(R,J[5])},i:V,o:V,d(J){J&&E(e),t[14](null),ce=!1,D(ve)}}}function Zt(t,e,n){let l,s,r;U(t,z,O=>n(15,l=O)),U(t,te,O=>n(16,s=O)),U(t,_e,O=>n(17,r=O));let i="",o="",u="",a="",d="",p="",v;const g=async()=>{if(!v.checkValidity())return;if(!i||!o||!u||!a||!d||!p){alert("Please fill out all fields");return}if(i.length<2){alert("Please enter a valid name");return}if(!o.includes("@")){alert("Please enter a valid email address");return}const O={name:i,email:o,address:u,city:a,state:d,zip:p},I=l;console.log(I);const S=await(await fetch(`${r}/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({$user:s,order_content:I,address_content:O})})).json();S.ok?(new Z({target:document.getElementById("popups"),props:{message:"Order placed",duration:2e3,type:"success"}}),A(z,l=[],l),localStorage.setItem("cart",JSON.stringify(l)),n(0,i=""),n(1,o=""),n(2,u=""),n(3,a=""),n(4,d=""),n(5,p="")):new Z({target:document.getElementById("popups"),props:{message:"Order failed, try again later",duration:2e3,type:"failed"}}),console.log(S)};function y(){i=this.value,n(0,i)}function h(){o=this.value,n(1,o)}function _(){u=this.value,n(2,u)}function b(){a=this.value,n(3,a)}function k(){d=this.value,n(4,d)}function q(){p=this.value,n(5,p)}function $(O){oe[O?"unshift":"push"](()=>{v=O,n(6,v)})}return[i,o,u,a,d,p,v,g,y,h,_,b,k,q,$]}class Kt extends W{constructor(e){super(),K(this,e,Zt,Qt,Q,{})}}function Fe(t,e,n){const l=t.slice();return l[7]=e[n].image,l[8]=e[n].price,l[9]=e[n].quantity,l[10]=e[n].name,l[11]=e[n].id,l}function De(t){let e,n,l,s,r,i,o,u=t[10]+"",a,d,p,v,g=t[8]+"",y,h,_,b,k,q,$=t[9]+"",O,I,C,S,T,F,R,ie,le,ce;function ve(){return t[5](t[11])}function J(){return t[6](t[11])}return{c(){e=m("li"),n=m("img"),r=w(),i=m("div"),o=m("span"),a=H(u),d=w(),p=m("span"),v=H("~ $"),y=H(g),h=w(),_=m("br"),b=w(),k=m("span"),q=H("Quantity: "),O=H($),I=w(),C=m("div"),S=m("button"),S.textContent="+",T=w(),F=m("button"),F.textContent="-",R=w(),ie=m("hr"),c(n,"width","96px"),c(n,"height","96px"),Ve(n.src,l=t[7])||c(n,"src",l),c(n,"alt",s=t[10]+" image"),c(n,"class","svelte-1fu2vn4"),c(o,"class","name svelte-1fu2vn4"),c(p,"class","price svelte-1fu2vn4"),c(_,"class","svelte-1fu2vn4"),c(k,"class","quantity svelte-1fu2vn4"),c(i,"class","data svelte-1fu2vn4"),c(S,"class","quantityChange green svelte-1fu2vn4"),c(F,"class","quantityChange red svelte-1fu2vn4"),c(C,"class","botonera svelte-1fu2vn4"),c(e,"class","svelte-1fu2vn4"),c(ie,"class","svelte-1fu2vn4")},m(M,Y){N(M,e,Y),f(e,n),f(e,r),f(e,i),f(i,o),f(o,a),f(i,d),f(i,p),f(p,v),f(p,y),f(i,h),f(i,_),f(i,b),f(i,k),f(k,q),f(k,O),f(e,I),f(e,C),f(C,S),f(C,T),f(C,F),N(M,R,Y),N(M,ie,Y),le||(ce=[L(S,"click",ve),L(F,"click",J)],le=!0)},p(M,Y){t=M,Y&1&&!Ve(n.src,l=t[7])&&c(n,"src",l),Y&1&&s!==(s=t[10]+" image")&&c(n,"alt",s),Y&1&&u!==(u=t[10]+"")&&de(a,u),Y&1&&g!==(g=t[8]+"")&&de(y,g),Y&1&&$!==($=t[9]+"")&&de(O,$)},d(M){M&&(E(e),E(R),E(ie)),le=!1,D(ce)}}}function Wt(t){let e,n,l,s,r,i,o,u,a,d,p,v,g,y,h,_,b,k,q,$=Ce(t[0]),O=[];for(let I=0;I<$.length;I+=1)O[I]=De(Fe(t,$,I));return _=new Kt({}),{c(){e=m("section"),n=m("div"),l=m("div"),s=m("div"),r=m("span"),i=m("strong"),i.textContent="Total:",o=H(" $"),u=H(t[1]),a=w(),d=m("button"),d.textContent="Clear cart",p=w(),v=m("ul"),g=m("hr"),y=w();for(let I=0;I<O.length;I+=1)O[I].c();h=w(),ne(_.$$.fragment),c(i,"class","svelte-1fu2vn4"),c(r,"class","svelte-1fu2vn4"),c(d,"class","svelte-1fu2vn4"),c(s,"class","total svelte-1fu2vn4"),c(g,"class","svelte-1fu2vn4"),c(v,"class","svelte-1fu2vn4"),c(l,"class","left svelte-1fu2vn4"),c(n,"class","cart svelte-1fu2vn4"),c(e,"class","svelte-1fu2vn4")},m(I,C){N(I,e,C),f(e,n),f(n,l),f(l,s),f(s,r),f(r,i),f(r,o),f(r,u),f(s,a),f(s,d),f(l,p),f(l,v),f(v,g),f(v,y);for(let S=0;S<O.length;S+=1)O[S]&&O[S].m(v,null);f(n,h),G(_,n,null),b=!0,k||(q=L(d,"click",t[2]),k=!0)},p(I,[C]){if((!b||C&2)&&de(u,I[1]),C&25){$=Ce(I[0]);let S;for(S=0;S<$.length;S+=1){const T=Fe(I,$,S);O[S]?O[S].p(T,C):(O[S]=De(T),O[S].c(),O[S].m(v,null))}for(;S<O.length;S+=1)O[S].d(1);O.length=$.length}},i(I){b||(P(_.$$.fragment,I),b=!0)},o(I){B(_.$$.fragment,I),b=!1},d(I){I&&E(e),tt(O,I),X(_),k=!1,q()}}}function Gt(t,e,n){let l,s;U(t,z,d=>n(0,s=d));const r=()=>{A(z,s=[],s),localStorage.setItem("cart",JSON.stringify(s))},i=d=>{A(z,s=s.map(p=>(p.id===d&&(p.quantity-=1),p)),s),A(z,s=s.filter(p=>p.quantity>0),s),localStorage.setItem("cart",JSON.stringify(s))},o=d=>{A(z,s=s.map(p=>(p.id===d&&(p.quantity+=1),p)),s),localStorage.setItem("cart",JSON.stringify(s))},u=d=>o(d),a=d=>i(d);return t.$$.update=()=>{t.$$.dirty&1&&n(1,l=s.reduce((d,p)=>d+p.price*p.quantity,0))},[s,l,r,i,o,u,a]}class Xt extends W{constructor(e){super(),K(this,e,Gt,Wt,Q,{})}}function Re(t){let e,n;return e=new Xt({}),{c(){ne(e.$$.fragment)},m(l,s){G(e,l,s),n=!0},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function He(t){let e,n;return e=new Ot({props:{selectValue:t[0]}}),{c(){ne(e.$$.fragment)},m(l,s){G(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.selectValue=l[0]),e.$set(r)},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Qe(t){let e,n;return e=new Ht({}),{c(){ne(e.$$.fragment)},m(l,s){G(e,l,s),n=!0},i(l){n||(P(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){X(e,l)}}}function Yt(t){let e,n,l,s,r,i,o,u,a,d;function p(b){t[4](b)}function v(b){t[5](b)}let g={logout:t[3]};t[1]!==void 0&&(g.cartViewable=t[1]),t[0]!==void 0&&(g.selectValue=t[0]),e=new Nt({props:g}),oe.push(()=>$e(e,"cartViewable",p)),oe.push(()=>$e(e,"selectValue",v));let y=t[2]&&t[1]&&Re(),h=!t[2]&&He(t),_=t[2]&&!t[1]&&Qe();return{c(){ne(e.$$.fragment),s=w(),r=m("main"),y&&y.c(),i=w(),h&&h.c(),o=w(),_&&_.c(),u=w(),a=m("div"),c(a,"id","popups"),c(a,"class","popups svelte-14dva0d"),c(r,"class","svelte-14dva0d")},m(b,k){G(e,b,k),N(b,s,k),N(b,r,k),y&&y.m(r,null),f(r,i),h&&h.m(r,null),f(r,o),_&&_.m(r,null),f(r,u),f(r,a),d=!0},p(b,[k]){const q={};!n&&k&2&&(n=!0,q.cartViewable=b[1],Te(()=>n=!1)),!l&&k&1&&(l=!0,q.selectValue=b[0],Te(()=>l=!1)),e.$set(q),b[2]&&b[1]?y?k&6&&P(y,1):(y=Re(),y.c(),P(y,1),y.m(r,i)):y&&(se(),B(y,1,1,()=>{y=null}),re()),b[2]?h&&(se(),B(h,1,1,()=>{h=null}),re()):h?(h.p(b,k),k&4&&P(h,1)):(h=He(b),h.c(),P(h,1),h.m(r,o)),b[2]&&!b[1]?_?k&6&&P(_,1):(_=Qe(),_.c(),P(_,1),_.m(r,u)):_&&(se(),B(_,1,1,()=>{_=null}),re())},i(b){d||(P(e.$$.fragment,b),P(y),P(h),P(_),d=!0)},o(b){B(e.$$.fragment,b),B(y),B(h),B(_),d=!1},d(b){b&&(E(s),E(r)),X(e,b),y&&y.d(),h&&h.d(),_&&_.d()}}}function xt(t,e,n){let l,s,r,i,o,u;U(t,ee,h=>n(2,r=h)),U(t,te,h=>n(6,i=h)),U(t,_e,h=>n(7,o=h)),U(t,z,h=>n(8,u=h)),A(z,u=JSON.parse(localStorage.getItem("cart"))||[],u);let{username:a,password:d}=JSON.parse(localStorage.getItem("user"))||{};const p=()=>{A(ee,r=!1,r),A(z,u=[],u),A(te,i="",i),localStorage.removeItem("cart"),localStorage.removeItem("user")},v=async()=>{try{const _=await(await fetch(`${o}/login`,{method:"POST",body:JSON.stringify({username:a,password:d}),headers:{"Content-Type":"application/json"}})).json();console.log(_),_.ok?(A(ee,r=!0,r),A(te,i=a,i),new Z({target:document.getElementById("popups"),props:{message:`Welcome back ${i}`,duration:2e3,type:"success"}})):A(ee,r=!1,r)}catch(h){console.log(h),new Z({target:document.getElementById("popups"),props:{message:`Error: ${h}`,duration:2e3,type:"error"}})}};a&&d&&a.length>2&&d.length>8&&v();function g(h){l=h,n(1,l)}function y(h){s=h,n(0,s)}return n(1,l=!1),n(0,s="login"),[s,l,r,p,g,y]}class en extends W{constructor(e){super(),K(this,e,xt,Yt,Q,{})}}new en({target:document.getElementById("app")});

var We=Object.defineProperty;var Ge=(t,e,n)=>e in t?We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>(Ge(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function V(){}function Xe(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ze(t){return t()}function je(){return Object.create(null)}function D(t){t.forEach(Ze)}function ze(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let be;function Ve(t,e){return t===e?!0:(be||(be=document.createElement("a")),be.href=e,t===be.href)}function Ye(t){return Object.keys(t).length===0}function xe(t,...e){if(t==null){for(const l of e)l(void 0);return V}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function A(t,e,n){t.$$.on_destroy.push(xe(e,n))}function U(t,e,n){return t.set(n),e}function f(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode&&t.parentNode.removeChild(t)}function et(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function w(){return H(" ")}function Ke(){return H("")}function B(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Ee(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ne(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function tt(t){return Array.from(t.childNodes)}function de(t,e){e=""+e,t.data!==e&&(t.data=e)}function q(t,e){t.value=e??""}function Be(t,e,n){for(let l=0;l<t.options.length;l+=1){const s=t.options[l];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function nt(t){const e=t.querySelector(":checked");return e&&e.__value}let me;function ee(t){me=t}function lt(){if(!me)throw new Error("Function called outside component initialization");return me}const pe=[],re=[];let he=[];const Pe=[],st=Promise.resolve();let Ie=!1;function rt(){Ie||(Ie=!0,st.then(qe))}function ke(t){he.push(t)}function Te(t){Pe.push(t)}const Oe=new Set;let ae=0;function qe(){if(ae!==0)return;const t=me;do{try{for(;ae<pe.length;){const e=pe[ae];ae++,ee(e),ot(e.$$)}}catch(e){throw pe.length=0,ae=0,e}for(ee(null),pe.length=0,ae=0;re.length;)re.pop()();for(let e=0;e<he.length;e+=1){const n=he[e];Oe.has(n)||(Oe.add(n),n())}he.length=0}while(pe.length);for(;Pe.length;)Pe.pop()();Ie=!1,Oe.clear(),ee(t)}function ot(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ke)}}function it(t){const e=[],n=[];he.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),he=e}const ye=new Set;let ue;function le(){ue={r:0,c:[],p:ue}}function se(){ue.r||D(ue.c),ue=ue.p}function I(t,e){t&&t.i&&(ye.delete(t),t.i(e))}function j(t,e,n,l){if(t&&t.o){if(ye.has(t))return;ye.add(t),ue.c.push(()=>{ye.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ut(t,e){const n=e.token={};function l(s,r,i,o){if(e.token!==n)return;e.resolved=o;let u=e.ctx;i!==void 0&&(u=u.slice(),u[i]=o);const a=s&&(e.current=s)(u);let d=!1;e.block&&(e.blocks?e.blocks.forEach((p,_)=>{_!==r&&p&&(le(),j(p,1,1,()=>{e.blocks[_]===p&&(e.blocks[_]=null)}),se())}):e.block.d(1),a.c(),I(a,1),a.m(e.mount(),e.anchor),d=!0),e.block=a,e.blocks&&(e.blocks[r]=a),d&&qe()}if(Xe(t)){const s=lt();if(t.then(r=>{ee(s),l(e.then,1,e.value,r),ee(null)},r=>{if(ee(s),l(e.catch,2,e.error,r),ee(null),!e.hasCatch)throw r}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function ct(t,e,n){const l=e.slice(),{resolved:s}=t;t.current===t.then&&(l[t.value]=s),t.current===t.catch&&(l[t.error]=s),t.block.p(l,n)}function Ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function at(t,e){j(t,1,1,()=>{e.delete(t.key)})}function ft(t,e,n,l,s,r,i,o,u,a,d,p){let _=t.length,g=r.length,y=_;const h={};for(;y--;)h[t[y].key]=y;const v=[],b=new Map,k=new Map,N=[];for(y=g;y--;){const C=p(s,r,y),S=n(C);let T=i.get(S);T?l&&N.push(()=>T.p(C,e)):(T=a(S,C),T.c()),b.set(S,v[y]=T),S in h&&k.set(S,Math.abs(y-h[S]))}const L=new Set,O=new Set;function P(C){I(C,1),C.m(o,d),i.set(C.key,C),d=C.first,g--}for(;_&&g;){const C=v[g-1],S=t[_-1],T=C.key,M=S.key;C===S?(d=C.first,_--,g--):b.has(M)?!i.has(T)||L.has(T)?P(C):O.has(M)?_--:k.get(T)>k.get(M)?(O.add(T),P(C)):(L.add(M),_--):(u(S,i),_--)}for(;_--;){const C=t[_];b.has(C.key)||u(C,i)}for(;g;)P(v[g-1]);return D(N),v}function Le(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function te(t){t&&t.c()}function X(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),ke(()=>{const r=t.$$.on_mount.map(Ze).filter(ze);t.$$.on_destroy?t.$$.on_destroy.push(...r):D(r),t.$$.on_mount=[]}),s.forEach(ke)}function Y(t,e){const n=t.$$;n.fragment!==null&&(it(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,e){t.$$.dirty[0]===-1&&(pe.push(t),rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,l,s,r,i=null,o=[-1]){const u=me;ee(t);const a=t.$$={fragment:null,ctx:[],props:r,update:V,not_equal:s,bound:je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:je(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};i&&i(a.root);let d=!1;if(a.ctx=n?n(t,e.props||{},(p,_,...g)=>{const y=g.length?g[0]:_;return a.ctx&&s(a.ctx[p],a.ctx[p]=y)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](y),d&&pt(t,p)),_}):[],a.update(),d=!0,D(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const p=tt(e.target);a.fragment&&a.fragment.l(p),p.forEach(z)}else a.fragment&&a.fragment.c();e.intro&&I(t.$$.fragment),X(t,e.target,e.anchor),qe()}ee(u)}class K{constructor(){Se(this,"$$");Se(this,"$$set")}$destroy(){Y(this,1),this.$destroy=V}$on(e,n){if(!ze(n))return V;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Ye(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const dt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dt);const fe=[];function ge(t,e=V){let n;const l=new Set;function s(o){if(Q(t,o)&&(t=o,n)){const u=!fe.length;for(const a of l)a[1](),fe.push(a,t);if(u){for(let a=0;a<fe.length;a+=2)fe[a][0](fe[a+1]);fe.length=0}}}function r(o){s(o(t))}function i(o,u=V){const a=[o,u];return l.add(a),l.size===1&&(n=e(s,r)||V),o(t),()=>{l.delete(a),l.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:i}}const F=ge([]),_e=ge("https://tienda-obli.sebasdiaz.com"),W=ge(!1),we=ge([]);let oe=ge("");function ht(t){let e,n,l,s;return{c(){e=m("div"),n=m("p"),l=H(t[0]),c(n,"class","svelte-1gntdjx"),c(e,"style",s=`border-color: ${t[1]=="success"?"green":"red"};`),c(e,"class","svelte-1gntdjx")},m(r,i){E(r,e,i),f(e,n),f(n,l),t[4](e)},p(r,[i]){i&1&&de(l,r[0]),i&2&&s!==(s=`border-color: ${r[1]=="success"?"green":"red"};`)&&c(e,"style",s)},i:V,o:V,d(r){r&&z(e),t[4](null)}}}function mt(t,e,n){let{message:l}=e,{duration:s}=e,{type:r="success"}=e,i;setTimeout(()=>{n(2,i.style.opacity=1,i)},100),setTimeout(()=>{n(2,i.style.opacity=0,i),setTimeout(()=>{i.parentNode.removeChild(i)},150)},s);function o(u){re[u?"unshift":"push"](()=>{i=u,n(2,i)})}return t.$$set=u=>{"message"in u&&n(0,l=u.message),"duration"in u&&n(3,s=u.duration),"type"in u&&n(1,r=u.type)},[l,r,i,s,o]}class G extends K{constructor(e){super(),Z(this,e,mt,ht,Q,{message:0,duration:3,type:1})}}function gt(t){let e,n,l,s,r,i,o,u,a,d,p,_,g,y,h;return{c(){e=m("div"),n=m("h1"),n.textContent="Login",l=w(),s=m("form"),r=m("label"),r.textContent="Username:",i=w(),o=m("input"),u=w(),a=m("label"),a.textContent="Password:",d=w(),p=m("input"),_=w(),g=m("input"),c(n,"class","svelte-p5vqlt"),c(r,"for","loginUsername"),c(o,"type","text"),c(o,"name","loginUsername"),c(o,"id","loginUsername"),c(o,"minlength","2"),o.required=!0,c(o,"class","svelte-p5vqlt"),c(a,"for","loginPassword"),c(p,"type","password"),c(p,"name","loginPassword"),c(p,"id","loginPassword"),c(p,"minlength","8"),p.required=!0,c(p,"class","svelte-p5vqlt"),c(g,"type","submit"),g.value="Log In",c(g,"class","svelte-p5vqlt"),c(s,"id","login"),c(s,"action","POST"),c(e,"class","login svelte-p5vqlt")},m(v,b){E(v,e,b),f(e,n),f(e,l),f(e,s),f(s,r),f(s,i),f(s,o),q(o,t[0]),f(s,u),f(s,a),f(s,d),f(s,p),q(p,t[1]),f(s,_),f(s,g),t[6](s),y||(h=[B(o,"input",t[4]),B(p,"input",t[5]),B(s,"submit",Ne(Ee(t[3])))],y=!0)},p(v,[b]){b&1&&o.value!==v[0]&&q(o,v[0]),b&2&&p.value!==v[1]&&q(p,v[1])},i:V,o:V,d(v){v&&z(e),t[6](null),y=!1,D(h)}}}function _t(t,e,n){let l,s,r;A(t,W,g=>n(7,l=g)),A(t,oe,g=>n(8,s=g)),A(t,_e,g=>n(9,r=g));let i="",o="",u;const a=async()=>{if(!u.checkValidity()||i.length<2&&o.length<8){alert("Invalid data");return}try{const y=await(await fetch(`${r}/login`,{method:"POST",body:JSON.stringify({username:i,password:o}),headers:{"Content-Type":"application/json"}})).json();if(y.ok)U(oe,s=i,s),U(W,l=!0,l),console.log(y),localStorage.setItem("user",JSON.stringify({username:i,password:o})),new G({target:document.getElementById("popups"),props:{message:"Logged in as "+i,duration:2e3,type:"success"}});else throw new Error(y.error)}catch(g){console.log(g),new G({target:document.getElementById("popups"),props:{message:"Failed to login "+g,duration:2e3,type:"failed"}})}};function d(){i=this.value,n(0,i)}function p(){o=this.value,n(1,o)}function _(g){re[g?"unshift":"push"](()=>{u=g,n(2,u)})}return[i,o,u,a,d,p,_]}class vt extends K{constructor(e){super(),Z(this,e,_t,gt,Q,{})}}function bt(t){let e,n,l,s,r,i,o,u,a,d,p,_,g,y,h;return{c(){e=m("div"),n=m("h1"),n.textContent="Register",l=w(),s=m("form"),r=m("label"),r.textContent="Username:",i=w(),o=m("input"),u=w(),a=m("label"),a.textContent="Password:",d=w(),p=m("input"),_=w(),g=m("input"),c(n,"class","svelte-1mbg8b3"),c(r,"for","username"),c(o,"type","text"),c(o,"name","username"),c(o,"id","username"),c(o,"minlength","2"),o.required=!0,c(o,"class","svelte-1mbg8b3"),c(a,"for","password"),c(p,"type","password"),c(p,"name","password"),c(p,"id","password"),c(p,"minlength","8"),p.required=!0,c(p,"class","svelte-1mbg8b3"),c(g,"type","submit"),g.value="Register",c(g,"class","svelte-1mbg8b3"),c(s,"id","register"),c(s,"action","POST"),c(e,"class","register svelte-1mbg8b3")},m(v,b){E(v,e,b),f(e,n),f(e,l),f(e,s),f(s,r),f(s,i),f(s,o),q(o,t[0]),f(s,u),f(s,a),f(s,d),f(s,p),q(p,t[1]),f(s,_),f(s,g),t[6](s),y||(h=[B(o,"input",t[4]),B(p,"input",t[5]),B(s,"submit",Ne(Ee(t[3])))],y=!0)},p(v,[b]){b&1&&o.value!==v[0]&&q(o,v[0]),b&2&&p.value!==v[1]&&q(p,v[1])},i:V,o:V,d(v){v&&z(e),t[6](null),y=!1,D(h)}}}function yt(t,e,n){let l,s,r;A(t,W,g=>n(7,l=g)),A(t,oe,g=>n(8,s=g)),A(t,_e,g=>n(9,r=g));let i="",o="",u;const a=async()=>{if(!u.checkValidity()||i.length<2||o.length<8){alert("Invalid data");return}try{const y=await(await fetch(`${r}/register`,{method:"POST",body:JSON.stringify({username:i,password:o}),headers:{"Content-Type":"application/json"}})).json();if(y.ok)U(oe,s=i,s),U(W,l=!0,l),console.log(y),localStorage.setItem("user",JSON.stringify({username:i,password:o})),new G({target:document.getElementById("popups"),props:{message:"Registered as "+i,duration:2e3,type:"success"}});else throw new Error(y.error)}catch(g){console.log(g),new G({target:document.getElementById("popups"),props:{message:"Failed to register "+g,duration:2e3,type:"failed"}})}};function d(){i=this.value,n(0,i)}function p(){o=this.value,n(1,o)}function _(g){re[g?"unshift":"push"](()=>{u=g,n(2,u)})}return[i,o,u,a,d,p,_]}class wt extends K{constructor(e){super(),Z(this,e,yt,bt,Q,{})}}function Ae(t){let e,n;return e=new vt({}),{c(){te(e.$$.fragment)},m(l,s){X(e,l,s),n=!0},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function $e(t){let e,n;return e=new wt({}),{c(){te(e.$$.fragment)},m(l,s){X(e,l,s),n=!0},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function kt(t){let e,n,l,s=t[0]==="login"&&Ae(),r=t[0]==="register"&&$e();return{c(){e=m("section"),s&&s.c(),n=w(),r&&r.c()},m(i,o){E(i,e,o),s&&s.m(e,null),f(e,n),r&&r.m(e,null),l=!0},p(i,[o]){i[0]==="login"?s?o&1&&I(s,1):(s=Ae(),s.c(),I(s,1),s.m(e,n)):s&&(le(),j(s,1,1,()=>{s=null}),se()),i[0]==="register"?r?o&1&&I(r,1):(r=$e(),r.c(),I(r,1),r.m(e,null)):r&&(le(),j(r,1,1,()=>{r=null}),se())},i(i){l||(I(s),I(r),l=!0)},o(i){j(s),j(r),l=!1},d(i){i&&z(e),s&&s.d(),r&&r.d()}}}function Ct(t,e,n){let{selectValue:l}=e;return t.$$set=s=>{"selectValue"in s&&n(0,l=s.selectValue)},[l]}class St extends K{constructor(e){super(),Z(this,e,Ct,kt,Q,{selectValue:0})}}function Ot(t){let e,n,l,s,r;return{c(){e=m("a"),e.textContent="Login",n=w(),l=m("a"),l.textContent="Register",c(e,"href","./#login"),c(e,"class","svelte-162631l"),c(l,"href","./#register"),c(l,"class","svelte-162631l")},m(i,o){E(i,e,o),E(i,n,o),E(i,l,o),s||(r=[B(e,"click",t[7]),B(l,"click",t[8])],s=!0)},p:V,d(i){i&&(z(e),z(n),z(l)),s=!1,D(r)}}}function Vt(t){let e,n,l,s,r,i,o;return{c(){e=m("a"),n=H(t[3]),l=H("'s cart"),s=w(),r=m("a"),r.textContent="Log Out",c(e,"href","./#cart"),c(e,"class","svelte-162631l"),c(r,"href","./#login"),c(r,"class","svelte-162631l")},m(u,a){E(u,e,a),f(e,n),f(e,l),E(u,s,a),E(u,r,a),i||(o=[B(e,"click",t[4]),B(r,"click",function(){ze(t[1])&&t[1].apply(this,arguments)})],i=!0)},p(u,a){t=u,a&8&&de(n,t[3])},d(u){u&&(z(e),z(s),z(r)),i=!1,D(o)}}}function Pt(t){let e,n,l,s,r;function i(a,d){return a[2]?Vt:Ot}let o=i(t),u=o(t);return{c(){e=m("nav"),n=m("a"),n.textContent="Shop",l=w(),u.c(),c(n,"href","./#shop"),c(n,"class","svelte-162631l"),c(e,"class","svelte-162631l")},m(a,d){E(a,e,d),f(e,n),f(e,l),u.m(e,null),s||(r=B(n,"click",t[5]),s=!0)},p(a,[d]){o===(o=i(a))&&u?u.p(a,d):(u.d(1),u=o(a),u&&(u.c(),u.m(e,null)))},i:V,o:V,d(a){a&&z(e),u.d(),s=!1,r()}}}function It(t,e,n){let l,s;A(t,W,_=>n(2,l=_)),A(t,oe,_=>n(3,s=_));let{cartViewable:r=!1}=e,{logout:i}=e,{selectValue:o}=e;const u=()=>{l?n(6,r=!r):alert("Please log in before checking your cart")},a=()=>{l||new G({target:document.getElementById("popups"),props:{message:"Please log in to access the shop",duration:2e3,type:"failed"}}),n(6,r=!1)},d=()=>{n(0,o="login")},p=()=>{n(0,o="register")};return t.$$set=_=>{"cartViewable"in _&&n(6,r=_.cartViewable),"logout"in _&&n(1,i=_.logout),"selectValue"in _&&n(0,o=_.selectValue)},[o,i,l,s,u,a,r,d,p]}class zt extends K{constructor(e){super(),Z(this,e,It,Pt,Q,{cartViewable:6,logout:1,selectValue:0})}}function Et(t){let e,n,l,s,r,i,o,u,a,d,p,_,g;return{c(){e=m("div"),n=m("img"),s=w(),r=m("div"),i=m("div"),o=m("span"),o.textContent=`${t[0]}`,u=w(),a=m("span"),a.textContent=`$${t[2]}`,d=w(),p=m("button"),p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512" class="svelte-1orun37"><path d="M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"></path></svg>',c(n,"width","96px"),c(n,"height","96px"),Ve(n.src,l=t[1])||c(n,"src",l),c(n,"alt",t[0]+" image"),c(n,"class","svelte-1orun37"),c(o,"class","name"),c(a,"class","price svelte-1orun37"),c(i,"class","data svelte-1orun37"),c(r,"class","svelte-1orun37"),c(e,"class","product svelte-1orun37")},m(y,h){E(y,e,h),f(e,n),f(e,s),f(e,r),f(r,i),f(i,o),f(i,u),f(i,a),f(r,d),f(r,p),_||(g=B(p,"click",t[3]),_=!0)},p:V,i:V,o:V,d(y){y&&z(e),_=!1,g()}}}function Nt(t,e,n){let l;A(t,F,d=>n(5,l=d));let{chofer:s}=e;const{name:r,image:i,price:o,id:u}=s,a=()=>{l.some(d=>d.name===r)?U(F,l=l.map(d=>(d.id===u&&(d.quantity+=1),d)),l):U(F,l=[...l,{name:r,image:i,price:o,quantity:1,id:u}],l),F.set(l),new G({target:document.getElementById("popups"),props:{message:`${r} trip added to cart`,duration:2e3,type:"success"}}),localStorage.setItem("cart",JSON.stringify(l))};return t.$$set=d=>{"chofer"in d&&n(4,s=d.chofer)},[r,i,o,a,s]}class qt extends K{constructor(e){super(),Z(this,e,Nt,Et,Q,{chofer:4})}}const jt=(t,e)=>{const n=t.name.toUpperCase(),l=e.name.toUpperCase();let s=n>l?1:-1;return n===l&&(s=t.price>e.price?1:-1),s},Bt=(t,e)=>{const n=t.name.toUpperCase(),l=e.name.toUpperCase();let s=n<l?1:-1;return n===l&&(s=t.price>e.price?1:-1),s},Tt=(t,e)=>{const n=t.price,l=e.price;let s=n>l?1:-1;return n===l&&(s=t.name.toUpperCase()>e.name.toUpperCase()?1:-1),s},Lt=(t,e)=>{const n=t.price,l=e.price;let s=n<l?1:-1;return n===l&&(s=t.name.toUpperCase()>e.name.toUpperCase()?1:-1),s};function At(t){let e;return{c(){e=m("div"),e.innerHTML='<div class="spinner svelte-11vwt31"></div>',c(e,"class","spinnerContainer svelte-11vwt31")},m(n,l){E(n,e,l)},p:V,i:V,o:V,d(n){n&&z(e)}}}class $t extends K{constructor(e){super(),Z(this,e,null,At,Q,{})}}function Ue(t,e,n){const l=t.slice();return l[5]=e[n],l}function Je(t){let e,n;return e=new $t({}),{c(){te(e.$$.fragment)},m(l,s){X(e,l,s),n=!0},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function Ut(t){return{c:V,m:V,p:V,i:V,o:V,d:V}}function Jt(t){let e=[],n=new Map,l,s,r=Ce(t[1]);const i=o=>o[5];for(let o=0;o<r.length;o+=1){let u=Ue(t,r,o),a=i(u);n.set(a,e[o]=Me(a,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();l=Ke()},m(o,u){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,u);E(o,l,u),s=!0},p(o,u){u&2&&(r=Ce(o[1]),le(),e=ft(e,u,i,1,o,r,n,l.parentNode,at,Me,l,Ue),se())},i(o){if(!s){for(let u=0;u<r.length;u+=1)I(e[u]);s=!0}},o(o){for(let u=0;u<e.length;u+=1)j(e[u]);s=!1},d(o){o&&z(l);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function Me(t,e){let n,l,s;return l=new qt({props:{chofer:e[5]}}),{key:t,first:null,c(){n=Ke(),te(l.$$.fragment),this.first=n},m(r,i){E(r,n,i),X(l,r,i),s=!0},p(r,i){e=r;const o={};i&2&&(o.chofer=e[5]),l.$set(o)},i(r){s||(I(l.$$.fragment,r),s=!0)},o(r){j(l.$$.fragment,r),s=!1},d(r){r&&z(n),Y(l,r)}}}function Mt(t){return{c:V,m:V,p:V,i:V,o:V,d:V}}function Ft(t){let e,n,l,s,r,i,o,u,a,d,p,_,g,y,h=t[1].length===0&&Je(),v={ctx:t,current:null,token:null,hasCatch:!1,pending:Mt,then:Jt,catch:Ut,blocks:[,,,]};return ut(we,v),{c(){e=m("span"),e.textContent="Sort By:",n=w(),l=m("select"),s=m("option"),s.textContent="-",r=m("option"),r.textContent="A-Z",i=m("option"),i.textContent="Z-A",o=m("option"),o.textContent="Price (low to high)",u=m("option"),u.textContent="Price (high to low)",a=w(),d=m("div"),h&&h.c(),p=w(),v.block.c(),s.selected=!0,s.disabled=!0,s.__value="",q(s,s.__value),r.__value="name",q(r,r.__value),i.__value="nameDesc",q(i,i.__value),o.__value="price",q(o,o.__value),u.__value="priceDesc",q(u,u.__value),c(l,"name","sort"),c(l,"id","sort"),c(l,"class","svelte-1m8uqhg"),t[0]===void 0&&ke(()=>t[3].call(l)),c(d,"class","productos svelte-1m8uqhg")},m(b,k){E(b,e,k),E(b,n,k),E(b,l,k),f(l,s),f(l,r),f(l,i),f(l,o),f(l,u),Be(l,t[0],!0),E(b,a,k),E(b,d,k),h&&h.m(d,null),f(d,p),v.block.m(d,v.anchor=null),v.mount=()=>d,v.anchor=null,_=!0,g||(y=[B(l,"change",t[3]),B(l,"change",t[2])],g=!0)},p(b,[k]){t=b,k&1&&Be(l,t[0]),t[1].length===0?h?k&2&&I(h,1):(h=Je(),h.c(),I(h,1),h.m(d,p)):h&&(le(),j(h,1,1,()=>{h=null}),se()),ct(v,t,k)},i(b){_||(I(h),I(v.block),_=!0)},o(b){j(h);for(let k=0;k<3;k+=1){const N=v.blocks[k];j(N)}_=!1},d(b){b&&(z(e),z(n),z(l),z(a),z(d)),h&&h.d(),v.block.d(),v.token=null,v=null,g=!1,D(y)}}}function Dt(t,e,n){let l,s;A(t,we,u=>n(1,l=u)),A(t,_e,u=>n(4,s=u));let r;const i=()=>{r==="name"?l.sort(jt):r==="nameDesc"?l.sort(Bt):r==="price"?l.sort(Tt):r==="priceDesc"&&l.sort(Lt),we.set(l)};l.length===0&&fetch(`${s}/choferes`).then(u=>u.json()).then(u=>{U(we,l=u,l)}).catch(u=>{console.log(u),new G({target:document.getElementById("popups"),props:{message:"Failed to fetch choferes "+u,duration:2e3,type:"failed"}})});function o(){r=nt(this),n(0,r)}return[r,l,i,o]}class Rt extends K{constructor(e){super(),Z(this,e,Dt,Ft,Q,{})}}function Ht(t){let e,n,l,s,r,i,o,u,a,d,p,_,g,y,h,v,b,k,N,L,O,P,C,S,T,M,R,ie,ne,ce,ve;return{c(){e=m("div"),n=m("h2"),n.textContent="Checkout",l=w(),s=m("form"),r=m("label"),r.textContent="Name",i=w(),o=m("input"),u=w(),a=m("label"),a.textContent="Email",d=w(),p=m("input"),_=w(),g=m("label"),g.textContent="Address",y=w(),h=m("input"),v=w(),b=m("label"),b.textContent="City",k=w(),N=m("input"),L=w(),O=m("label"),O.textContent="State",P=w(),C=m("input"),S=w(),T=m("label"),T.textContent="Zip",M=w(),R=m("input"),ie=w(),ne=m("button"),ne.textContent="Submit",c(r,"for","name"),c(r,"class","svelte-1jp0wxp"),c(o,"type","text"),c(o,"id","name"),c(o,"minlength","2"),c(a,"for","email"),c(a,"class","svelte-1jp0wxp"),c(p,"type","email"),c(p,"id","email"),c(g,"for","address"),c(g,"class","svelte-1jp0wxp"),c(h,"type","text"),c(h,"id","address"),c(h,"minlength","2"),c(b,"for","city"),c(b,"class","svelte-1jp0wxp"),c(N,"type","text"),c(N,"id","city"),c(N,"minlength","2"),c(O,"for","state"),c(O,"class","svelte-1jp0wxp"),c(C,"type","text"),c(C,"id","state"),c(C,"minlength","2"),c(T,"for","zip"),c(T,"class","svelte-1jp0wxp"),c(R,"type","text"),c(R,"id","zip"),c(ne,"type","submit"),c(s,"method","post"),c(s,"class","svelte-1jp0wxp"),c(e,"class","formCheckout svelte-1jp0wxp")},m($,J){E($,e,J),f(e,n),f(e,l),f(e,s),f(s,r),f(s,i),f(s,o),q(o,t[0]),f(s,u),f(s,a),f(s,d),f(s,p),q(p,t[1]),f(s,_),f(s,g),f(s,y),f(s,h),q(h,t[2]),f(s,v),f(s,b),f(s,k),f(s,N),q(N,t[3]),f(s,L),f(s,O),f(s,P),f(s,C),q(C,t[4]),f(s,S),f(s,T),f(s,M),f(s,R),q(R,t[5]),f(s,ie),f(s,ne),t[14](s),ce||(ve=[B(o,"input",t[8]),B(p,"input",t[9]),B(h,"input",t[10]),B(N,"input",t[11]),B(C,"input",t[12]),B(R,"input",t[13]),B(s,"submit",Ne(Ee(t[7])))],ce=!0)},p($,[J]){J&1&&o.value!==$[0]&&q(o,$[0]),J&2&&p.value!==$[1]&&q(p,$[1]),J&4&&h.value!==$[2]&&q(h,$[2]),J&8&&N.value!==$[3]&&q(N,$[3]),J&16&&C.value!==$[4]&&q(C,$[4]),J&32&&R.value!==$[5]&&q(R,$[5])},i:V,o:V,d($){$&&z(e),t[14](null),ce=!1,D(ve)}}}function Qt(t,e,n){let l,s,r;A(t,F,O=>n(15,l=O)),A(t,oe,O=>n(16,s=O)),A(t,_e,O=>n(17,r=O));let i="",o="",u="",a="",d="",p="",_;const g=async()=>{if(!_.checkValidity())return;if(!i||!o||!u||!a||!d||!p){alert("Please fill out all fields");return}if(i.length<2){alert("Please enter a valid name");return}if(!o.includes("@")){alert("Please enter a valid email address");return}const O={name:i,email:o,address:u,city:a,state:d,zip:p},P=l;console.log(P);const S=await(await fetch(`${r}/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({$user:s,order_content:P,address_content:O})})).json();S.ok?(new G({target:document.getElementById("popups"),props:{message:"Order placed",duration:2e3,type:"success"}}),U(F,l=[],l),localStorage.setItem("cart",JSON.stringify(l)),n(0,i=""),n(1,o=""),n(2,u=""),n(3,a=""),n(4,d=""),n(5,p="")):new G({target:document.getElementById("popups"),props:{message:"Order failed, try again later",duration:2e3,type:"failed"}}),console.log(S)};function y(){i=this.value,n(0,i)}function h(){o=this.value,n(1,o)}function v(){u=this.value,n(2,u)}function b(){a=this.value,n(3,a)}function k(){d=this.value,n(4,d)}function N(){p=this.value,n(5,p)}function L(O){re[O?"unshift":"push"](()=>{_=O,n(6,_)})}return[i,o,u,a,d,p,_,g,y,h,v,b,k,N,L]}class Zt extends K{constructor(e){super(),Z(this,e,Qt,Ht,Q,{})}}function Fe(t,e,n){const l=t.slice();return l[7]=e[n].image,l[8]=e[n].price,l[9]=e[n].quantity,l[10]=e[n].name,l}function De(t){let e,n,l,s,r,i,o,u=t[10]+"",a,d,p,_,g=t[8]+"",y,h,v,b,k,N,L=t[9]+"",O,P,C,S,T,M,R,ie,ne,ce;function ve(){return t[5](t[10])}function $(){return t[6](t[10])}return{c(){e=m("li"),n=m("img"),r=w(),i=m("div"),o=m("span"),a=H(u),d=w(),p=m("span"),_=H("~ $"),y=H(g),h=w(),v=m("br"),b=w(),k=m("span"),N=H("Quantity: "),O=H(L),P=w(),C=m("div"),S=m("button"),S.textContent="+",T=w(),M=m("button"),M.textContent="-",R=w(),ie=m("hr"),c(n,"width","96px"),c(n,"height","96px"),Ve(n.src,l=t[7])||c(n,"src",l),c(n,"alt",s=t[10]+" image"),c(n,"class","svelte-nzwr6v"),c(o,"class","name svelte-nzwr6v"),c(p,"class","price svelte-nzwr6v"),c(v,"class","svelte-nzwr6v"),c(k,"class","quantity svelte-nzwr6v"),c(i,"class","data svelte-nzwr6v"),c(S,"class","quantityChange green svelte-nzwr6v"),c(M,"class","quantityChange red svelte-nzwr6v"),c(C,"class","svelte-nzwr6v"),c(e,"class","svelte-nzwr6v"),c(ie,"class","svelte-nzwr6v")},m(J,x){E(J,e,x),f(e,n),f(e,r),f(e,i),f(i,o),f(o,a),f(i,d),f(i,p),f(p,_),f(p,y),f(i,h),f(i,v),f(i,b),f(i,k),f(k,N),f(k,O),f(e,P),f(e,C),f(C,S),f(C,T),f(C,M),E(J,R,x),E(J,ie,x),ne||(ce=[B(S,"click",ve),B(M,"click",$)],ne=!0)},p(J,x){t=J,x&1&&!Ve(n.src,l=t[7])&&c(n,"src",l),x&1&&s!==(s=t[10]+" image")&&c(n,"alt",s),x&1&&u!==(u=t[10]+"")&&de(a,u),x&1&&g!==(g=t[8]+"")&&de(y,g),x&1&&L!==(L=t[9]+"")&&de(O,L)},d(J){J&&(z(e),z(R),z(ie)),ne=!1,D(ce)}}}function Kt(t){let e,n,l,s,r,i,o,u,a,d,p,_,g,y,h,v,b,k,N,L=Ce(t[0]),O=[];for(let P=0;P<L.length;P+=1)O[P]=De(Fe(t,L,P));return v=new Zt({}),{c(){e=m("section"),n=m("div"),l=m("div"),s=m("div"),r=m("span"),i=m("strong"),i.textContent="Total:",o=H(" $"),u=H(t[1]),a=w(),d=m("button"),d.textContent="Clear cart",p=w(),_=m("ul"),g=m("hr"),y=w();for(let P=0;P<O.length;P+=1)O[P].c();h=w(),te(v.$$.fragment),c(i,"class","svelte-nzwr6v"),c(r,"class","svelte-nzwr6v"),c(d,"class","svelte-nzwr6v"),c(s,"class","total svelte-nzwr6v"),c(g,"class","svelte-nzwr6v"),c(_,"class","svelte-nzwr6v"),c(l,"class","left svelte-nzwr6v"),c(n,"class","cart svelte-nzwr6v"),c(e,"class","svelte-nzwr6v")},m(P,C){E(P,e,C),f(e,n),f(n,l),f(l,s),f(s,r),f(r,i),f(r,o),f(r,u),f(s,a),f(s,d),f(l,p),f(l,_),f(_,g),f(_,y);for(let S=0;S<O.length;S+=1)O[S]&&O[S].m(_,null);f(n,h),X(v,n,null),b=!0,k||(N=B(d,"click",t[2]),k=!0)},p(P,[C]){if((!b||C&2)&&de(u,P[1]),C&25){L=Ce(P[0]);let S;for(S=0;S<L.length;S+=1){const T=Fe(P,L,S);O[S]?O[S].p(T,C):(O[S]=De(T),O[S].c(),O[S].m(_,null))}for(;S<O.length;S+=1)O[S].d(1);O.length=L.length}},i(P){b||(I(v.$$.fragment,P),b=!0)},o(P){j(v.$$.fragment,P),b=!1},d(P){P&&z(e),et(O,P),Y(v),k=!1,N()}}}function Wt(t,e,n){let l,s;A(t,F,d=>n(0,s=d));const r=()=>{U(F,s=[],s),localStorage.setItem("cart",JSON.stringify(s))},i=d=>{U(F,s=s.map(p=>(p.name===d&&(p.quantity-=1),p)),s),U(F,s=s.filter(p=>p.quantity>0),s),localStorage.setItem("cart",JSON.stringify(s))},o=d=>{U(F,s=s.map(p=>(p.name===d&&(p.quantity+=1),p)),s),localStorage.setItem("cart",JSON.stringify(s))},u=d=>o(d),a=d=>i(d);return t.$$.update=()=>{t.$$.dirty&1&&n(1,l=s.reduce((d,p)=>d+p.price*p.quantity,0))},[s,l,r,i,o,u,a]}class Gt extends K{constructor(e){super(),Z(this,e,Wt,Kt,Q,{})}}function Re(t){let e,n;return e=new Gt({}),{c(){te(e.$$.fragment)},m(l,s){X(e,l,s),n=!0},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function He(t){let e,n;return e=new St({props:{selectValue:t[0]}}),{c(){te(e.$$.fragment)},m(l,s){X(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.selectValue=l[0]),e.$set(r)},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function Qe(t){let e,n;return e=new Rt({}),{c(){te(e.$$.fragment)},m(l,s){X(e,l,s),n=!0},i(l){n||(I(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function Xt(t){let e,n,l,s,r,i,o,u,a,d;function p(b){t[4](b)}function _(b){t[5](b)}let g={logout:t[3]};t[1]!==void 0&&(g.cartViewable=t[1]),t[0]!==void 0&&(g.selectValue=t[0]),e=new zt({props:g}),re.push(()=>Le(e,"cartViewable",p)),re.push(()=>Le(e,"selectValue",_));let y=t[2]&&t[1]&&Re(),h=!t[2]&&He(t),v=t[2]&&!t[1]&&Qe();return{c(){te(e.$$.fragment),s=w(),r=m("main"),y&&y.c(),i=w(),h&&h.c(),o=w(),v&&v.c(),u=w(),a=m("div"),c(a,"id","popups"),c(a,"class","popups svelte-f6gwcw"),c(r,"class","svelte-f6gwcw")},m(b,k){X(e,b,k),E(b,s,k),E(b,r,k),y&&y.m(r,null),f(r,i),h&&h.m(r,null),f(r,o),v&&v.m(r,null),f(r,u),f(r,a),d=!0},p(b,[k]){const N={};!n&&k&2&&(n=!0,N.cartViewable=b[1],Te(()=>n=!1)),!l&&k&1&&(l=!0,N.selectValue=b[0],Te(()=>l=!1)),e.$set(N),b[2]&&b[1]?y?k&6&&I(y,1):(y=Re(),y.c(),I(y,1),y.m(r,i)):y&&(le(),j(y,1,1,()=>{y=null}),se()),b[2]?h&&(le(),j(h,1,1,()=>{h=null}),se()):h?(h.p(b,k),k&4&&I(h,1)):(h=He(b),h.c(),I(h,1),h.m(r,o)),b[2]&&!b[1]?v?k&6&&I(v,1):(v=Qe(),v.c(),I(v,1),v.m(r,u)):v&&(le(),j(v,1,1,()=>{v=null}),se())},i(b){d||(I(e.$$.fragment,b),I(y),I(h),I(v),d=!0)},o(b){j(e.$$.fragment,b),j(y),j(h),j(v),d=!1},d(b){b&&(z(s),z(r)),Y(e,b),y&&y.d(),h&&h.d(),v&&v.d()}}}function Yt(t,e,n){let l,s,r,i,o,u;A(t,W,h=>n(2,r=h)),A(t,oe,h=>n(6,i=h)),A(t,_e,h=>n(7,o=h)),A(t,F,h=>n(8,u=h)),U(F,u=JSON.parse(localStorage.getItem("cart"))||[],u);let{username:a,password:d}=JSON.parse(localStorage.getItem("user"))||{};const p=()=>{U(W,r=!1,r),localStorage.removeItem("user")},_=()=>{fetch(`${o}/login`,{method:"POST",body:JSON.stringify({username:a,password:d}),headers:{"Content-Type":"application/json"}}).then(h=>h.json()).then(h=>{console.log(h),h.ok?(U(W,r=!0,r),U(oe,i=a,i),new G({target:document.getElementById("popups"),props:{message:`Welcome back ${i}`,duration:2e3,type:"success"}})):U(W,r=!1,r)})};a&&d&&a.length>2&&d.length>8&&(U(W,r=!0,r),_());function g(h){l=h,n(1,l)}function y(h){s=h,n(0,s)}return n(1,l=!1),n(0,s="login"),[s,l,r,p,g,y]}class xt extends K{constructor(e){super(),Z(this,e,Yt,Xt,Q,{})}}new xt({target:document.getElementById("app")});
